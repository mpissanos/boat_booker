<!--Finish implementing modal -->


<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Boat Name</th>
      <th>Type</th>
      <th>Capacity</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody id="boatList">
  <% @boats.each do |boat|%> 
    <tr>
      <td><%= "#{boat.name}" %></td>
      <td><%= "#{boat.boat_type}" %></td>
      <td><%= "#{boat.capacity}" %></td>
      <td><%= link_to 'Edit', edit_boat_path(boat), class: "btn btn-primary" %>
      </td>
      <div id="boat-<%=boat.id%>"></div>
      <td><%= link_to "Delete", boat_path(boat), class: "btn btn-primary", data: {:confirm => "Are you sure?"}, method: :delete %></td>
      <td>
        <button class="js-more btn btn-secondary" data-id="<%=boat.id%>">Next Trip</button>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>


  <div id="tripInfo" title="">
    <h1 id="tripDate"></h1>
    <p id="tripLocation"></p>
    <a id="tripUrl" href="#"></a>
</div>




<script type="text/javascript" charset="utf-8">
$(function() {
  $( "#tripInfo" ).dialog({
    appendTo: "#tripInfo",
      autoOpen: false,
      show: {
        effect: "blind",
        duration: 1000
      },
      hide: {
        effect: "explode",
        duration: 500
      }
    });
})

  $(function() {
    $(".js-more").on('click', function() {
      $("#tripInfo").dialog("open")
      let id = $(this).data('id')
      $.get("/boats/" + id , function(data) {
        $("#tripDate").text("Date - " + data["trips"][0]["date"])
        $("#tripLocation").text("Location - " + data["trips"][0]["location"])
        $("#tripUrl").attr("href", data['trips'][0]['url'])
        $("#tripUrl").text("Go to Trip Page")
      })
    })
  })
</script>

